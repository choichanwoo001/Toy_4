<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>인생, 쓰다 - 마이페이지</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #F4DDB8; color: #495235; }
        .container-card { background-color: white; border-radius: 1rem; padding: 2rem; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); border: 1px solid #B87B5C; }
        .section-title { font-size: 1.75rem; font-weight: 600; color: #90533B; margin-bottom: 1.5rem; border-bottom: 1px solid #B87B5C; padding-bottom: 0.5rem; }
        .info-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 0; border-bottom: 1px dashed #E0E0E0; }
        .info-item:last-child { border-bottom: none; }
        .info-label { font-weight: 500; color: #495235; }
        .info-value { color: #8F9562; font-weight: 400; }
        .btn-action { background-color: #DA983C; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 500; transition: background-color 0.2s ease-in-out; width: 100%; text-align: center; }
        .btn-action:hover { background-color: #90533B; }
        .btn-link { background-color: transparent; color: #8F9562; padding: 0.75rem 0; font-weight: 500; transition: color 0.2s ease-in-out; width: 100%; text-align: center; }
        .btn-link:hover { color: #495235; }
        .btn-group-horizontal { display: flex; justify-content: space-between; gap: 1rem; flex-wrap: wrap; }
        .btn-group-horizontal .btn-link { flex: 1 1 30%; min-width: 120px; padding: 0.75rem 0.5rem; }
        .profile-image { width: 100px; height: 100px; border-radius: 50%; background-color: #F4DDB8; border: 2px solid #B87B5C; display: flex; justify-content: center; align-items: center; font-size: 3rem; color: #90533B; overflow: hidden; }
        .stamp-image-preview { width: 60px; height: 60px; opacity: 0.8; transform: rotate(-10deg); }
        .time-select { width: 100px; padding: 0.5rem; border: 1px solid #B87B5C; border-radius: 0.5rem; font-size: 1rem; color: #495235; background-color: white; appearance: none; -webkit-appearance: none; -moz-appearance: none; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23495235%22%20d%3D%22M287%2C114.1L146.2%2C254.9L5.4%2C114.1L5.4%2C114.1L146.2%2C25.3l140.8%2C88.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 0.7em top 50%, 0 0; background-size: 0.65em auto, 100%; }
        .time-select:focus { outline: none; border-color: #DA983C; box-shadow: 0 0 0 2px rgba(218, 152, 60, 0.2); }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 px-4 sm:px-6 lg:px-8">
    <header class="w-full max-w-4xl text-center mb-10">
        <h1 class="text-5xl font-bold text-[#90533B] mb-2">인생, 쓰다</h1>
        <p class="text-2xl text-[#495235]">마이페이지</p>
    </header>

    <main class="w-full max-w-3xl container-card space-y-8">
        <section>
            <h2 class="section-title">내 정보</h2>
            <div class="flex flex-col items-center mb-6">
                <div class="profile-image mb-4">
                    <span>🙂</span>
                </div>
                <h3 class="text-2xl font-bold text-[#90533B] mb-1" th:text="${summary.nickname}">사용자명 (닉네임)</h3>
                <p class="text-base text-[#8F9562]" th:text="${summary.email}">example@email.com</p>
                <p class="text-sm text-[#B87B5C] mt-2" th:text="${#temporals.format(summary.joinDate, 'yyyy년 M월부터 함께하고 있어요')}">2025년 1월부터 함께하고 있어요</p>
            </div>
            <div class="space-y-3">
                <button class="btn-action bg-[#8F9562] hover:bg-[#495235]">프로필 수정</button>
                <button class="btn-action bg-red-500 hover:bg-red-600">로그아웃</button>
            </div>
        </section>

        <section>
            <h2 class="section-title">나의 활동 요약</h2>
            <div class="space-y-3">
                <div class="info-item">
                    <span class="info-label">총 일기 작성 수</span>
                    <span class="info-value" th:text="${summary.totalDiaryCount}">123개</span>
                </div>
                <div class="info-item">
                    <span class="info-label">연속 일기 작성 일수</span>
                    <span class="info-value" th:text="${summary.consecutiveDiaryDays}">7일</span>
                </div>
                <div class="info-item">
                    <span class="info-label">주요 감정 상태</span>
                    <span class="info-value">
                        <span th:each="emotion : ${summary.mainEmotions}" th:text="${emotion}"></span>
                    </span>
                </div>
                <div class="info-item flex-col items-start">
                    <span class="info-label mb-2">최근 AI 코멘트</span>
                    <div class="flex items-center text-sm text-[#495235] bg-[#F4DDB8] p-3 rounded-lg border border-[#B87B5C] w-full">
                        <img th:src="@{/${summary.recentStampImage}}" alt="참 잘했어요 스탬프" class="stamp-image-preview mr-3">
                        <span th:text="${summary.recentAiComment}">제자님, 오늘도 하루를 잘 기록했네요! 작은 노력이 큰 변화를 만든답니다.</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 이하 영역은 기존 html과 동일하게 유지, 필요시 Thymeleaf로 확장 가능 -->
        <section>
            <h2 class="section-title">리포트 및 상담</h2>
            <div class="space-y-3">
                <button class="btn-action bg-[#DA983C] hover:bg-[#B87B5C]">나의 감정 리포트 보러 가기</button>
                <button class="btn-action bg-[#8F9562] hover:bg-[#495235]">선생님과 대화하기</button>
            </div>
        </section>

        <section>
            <h2 class="section-title">알림 설정</h2>
            <div class="space-y-4">
                <div class="flex items-center space-x-4">
                    <span class="info-label whitespace-nowrap">선생님께 코멘트 받을 시간:</span>
                    <select id="comment-hour" class="time-select"></select>
                    <span class="text-xl font-bold text-[#495235]">:</span>
                    <select id="comment-minute" class="time-select"></select>
                </div>
                <button id="save-comment-time-btn" class="btn-action bg-[#DA983C] hover:bg-[#90533B]">시간 저장</button>
            </div>
        </section>
        <section>
            <h2 class="section-title">데이터 관리</h2>
            <div class="space-y-3">
                <button class="btn-action bg-[#DA983C] hover:bg-[#B87B5C]">일기 데이터 내보내기 (PDF/텍스트)</button>
                <button class="btn-action bg-[#B87B5C] hover:bg-[#90533B]">모든 데이터 삭제 (복구 불가)</button>
            </div>
        </section>

        <section>
            <h2 class="section-title">앱 정보 및 계정</h2>
            <div class="space-y-3">
                <div class="info-item">
                    <span class="info-label">앱 버전</span>
                    <span class="info-value">1.0.0</span>
                </div>
                <div class="btn-group-horizontal mb-2">
                    <button class="btn-link">이용약관</button>
                    <button class="btn-link">개인정보처리방침</button>
                    <button class="btn-link">문의하기</button>
                </div>
                <button class="btn-link text-red-500 hover:text-red-700">회원 탈퇴</button>
            </div>
        </section>

    </main>

    <script>
        // 시간 및 분 드롭다운 채우기
        function populateTimeSelectors() {
            const hourSelect = document.getElementById('comment-hour');
            const minuteSelect = document.getElementById('comment-minute');

            // 시간 (00-23)
            for (let i = 0; i < 24; i++) {
                const option = document.createElement('option');
                option.value = String(i).padStart(2, '0');
                option.textContent = String(i).padStart(2, '0');
                hourSelect.appendChild(option);
            }

            // 분 (00-59)
            for (let i = 0; i < 60; i++) {
                const option = document.createElement('option');
                option.value = String(i).padStart(2, '0');
                option.textContent = String(i).padStart(2, '0');
                minuteSelect.appendChild(option);
            }

            // 현재 시간을 기본값으로 설정 (선택 사항)
            const now = new Date();
            hourSelect.value = String(now.getHours()).padStart(2, '0');
            minuteSelect.value = String(now.getMinutes()).padStart(2, '0');
        }
        window.onload = populateTimeSelectors;
    </script>
</body>
</html>
