<div th:fragment="content">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
          rel="stylesheet" th:href="@{/css/pointshop.css}">

    <!-- 채팅 전용 CSS -->
    <link rel="stylesheet" th:href="@{/css/report.css}"/>
    
    <!-- Chart.js 라이브러리 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <section id="report-page-section" class="max-w-4xl mx-auto space-y-8 py-10">
        <div class="report-center-wrap my-4">
            <!-- <div class="text-center text-xl text-[#495235] mb-4" id="current-week-display"></div> -->
            <div class="flex justify-center items-center space-x-4 mb-8">
                <button id="prev-week-btn" class="btn-nav">&lt;</button>
                <div class="text-center text-xl text-[#495235] mb-4" id="current-week-display"></div>
                <button id="next-week-btn" class="btn-nav">&gt;</button>
            </div>
        </div>

        <div class="container-card">
            <h2 class="text-2xl font-semibold text-[#90533B] mb-4">감정 변화 추이</h2>
            <div class="chart-container">
                <canvas id="emotionTrendChart"></canvas>
            </div>
            <div class="mt-4 text-base text-[#8F9562]">
                <p>그래프 색상 예시: 기쁨 - HARVEST GOLD, 슬픔 - DARK FERN, 평온 - MOSS GREEN</p>
            </div>
        </div>

        <div class="container-card">
            <h2 class="text-2xl font-semibold text-[#90533B] mb-4">선생님의 감정 진단 (현상)</h2>
            <div class="mt-5 text-base text-[#8F9562]">
                <p id="report-emotion-summary" class="text-[#495235] leading-relaxed text-lg mb-4"></p>
            </div>
        </div>

        <div class="container-card">
            <h2 class="text-2xl font-semibold text-[#90533B] mb-4">감정 진단 근거</h2>
            <p class="text-[#495235] leading-relaxed text-lg mb-4">
                선생님의 감정 진단은 제자님의 일기 속 다음과 같은 표현들을 바탕으로 이루어졌어요.
            </p>
            <div class="mt-5 text-base text-[#8F9562]">
                <p>※ AI가 분석한 문맥상 중요 키워드 및 문장입니다.</p>
            </div>
            <div id="diagnosis-basis-bubbles" class="flex flex-wrap gap-2 mt-4"></div>
        </div>

        <div class="container-card">
            <h2 class="text-2xl font-semibold text-[#90533B] mb-4">제자님을 위한 추천 놀이/행동</h2>
            <ul id="recommendation-list" class="space-y-2"></ul> <!-- 🔧 이 줄 추가 -->
        </div>

        <div class="container-card">
            <h2 class="text-2xl font-semibold text-[#90533B] mb-4">선생님의 자기 성찰 질문</h2>
            <p class="text-[#495235] leading-relaxed text-lg">
                제자님, 혹시 최근의 감정을 느끼는 특별한 이유가 있었을까요?
                그리고 [추천 놀이/행동] 중에서 가장 마음에 드는 것은 무엇인가요?
                선생님은 언제나 제자님의 성장을 응원한답니다.
            </p>
            <div class="flex justify-end mt-8">
                <button id="go-chat" class="btn-chat-teacher">
                    선생님과 채팅하기
                </button>
            </div>
        </div>
    </section>
    <!-- 리포트 JavaScript -->
    <script th:inline="javascript">
        window.reportUserId = /*[[${user != null} ? ${user.userId} : 'null']]*/ null;
    </script>
    <script th:src="@{/js/report.js}"></script>
</div>